// kabukicho-engine/models/City.js

/**
 * ì¹´ë¶€í‚¤ì´ˆ ì‹¬ì‹œí‹° & ì •ì¹˜ ì‹œìŠ¤í…œ ëª¨ë¸ (sc_.cgi ê¸°ë°˜)
 */
export class City {
    constructor() {
        // --- 4.2. ì‹¬ì‹œí‹° & ì •ì¹˜ ì‹œìŠ¤í…œ ë³€ìˆ˜ ---
        this.budget = 1000000;    // gp: ë„ì‹œ ì˜ˆì‚° (0 ì´í•˜ê°€ ë˜ë©´ ë„ì‹œ ì‚­ì œ)
        this.taxRate = 10;        // tx_nm: ì„¸ìœ¨ (%)
        this.maintenance = 5000;  // cs: ë„ì‹œ ìœ ì§€ë¹„ (í„´ë§ˆë‹¤ ì°¨ê°)
        
        // --- ì •ì±… ë°˜ì˜ ë° ë‰´ìŠ¤ ---
        this.policyTimer = 0;     // $lg: ì •ì±… ì‹¬ì˜ ì‹œê°„ (í„´ ë‹¨ìœ„ë¡œ ê´€ë¦¬)
        this.pendingPolicy = null; // í˜„ì¬ ì‹¬ì˜ ì¤‘ì¸ ì •ì±… ë°ì´í„°
        this.news = ["ì¹´ë¶€í‚¤ì´ˆì— ìƒˆë¡œìš´ ì‹œì¥ì´ ì·¨ì„í–ˆìŠµë‹ˆë‹¤. ğŸš¬"]; // ì „ê´‘íŒ ë‰´ìŠ¤
    }

    /**
     * ìƒˆë¡œìš´ ì •ì±…(ì„¸ìœ¨ ë³€ê²½ ë“±)ì„ ì œì•ˆí•œë‹¤.
     * ê¸°íšì„œì˜ '1ì‹œê°„ ì‹¬ì˜ ì‹œê°„($lg)'ì„ ë°˜ì˜í•œë‹¤.
     */
    proposePolicy(type, value) {
        this.pendingPolicy = { type, value };
        this.policyTimer = 60; // ì˜ˆ: 60í„´(1ì‹œê°„ ë¶„ëŸ‰) ë™ì•ˆ ì‹¬ì˜
        this.addNews(`ğŸ“¢ ì •ì±… ì‹¬ì˜ ì‹œì‘: ${type}ì„(ë¥¼) ${value}ë¡œ ë³€ê²½í•˜ëŠ” ì•ˆê±´ì…ë‹ˆë‹¤.`);
    }

    /**
     * ì „ê´‘íŒ ë‰´ìŠ¤ ì¶”ê°€
     */
    addNews(msg) {
        this.news.push(msg);
        if (this.news.length > 20) this.news.shift(); // ë‰´ìŠ¤ ë¡œê·¸ëŠ” ìµœê·¼ 20ê°œë§Œ ìœ ì§€
    }

    /**
     * ì˜ˆì‚°ì´ 0 ì´í•˜ì¸ì§€ ì²´í¬ (íŒŒì‚° ë¦¬ìŠ¤í¬)
     */
    isBankrupt() {
        return this.budget <= 0;
    }
}